I"!<h1 id="brief-">Brief :</h1>

<p>In this blog, we will be diving in an excellent <a href="https://github.com/hzeller/rpi-rgb-led-matrix">github repo</a>. Which allows us to control RGB LED display. I will explain, how to setup the environment and code on your machine. Basically, author provides binding that can be used seemlessly in python and C#. While, some others have used this API to create some other bindings like in go, nodejs, rust. In this tutorial, i will be using <code class="language-plaintext highlighter-rouge">Go</code> binding as an example.</p>

<h1 id="go-binding-dilemma-">Go binding dilemma ~</h1>

<p>Yeah, now here. I’ve had my share bit of troubles using the <a href="https://github.com/mcuadros/go-rpi-rgb-led-matrix">go binding</a>. It gave me plethora of pain. Somehow the suggested way to install it on a given system wasn’t working my way. AND, the repo is last updated 3 years ago. So i had my issues installing it. Fortunately, i found <a href="https://github.com/RockKeeper/go-rpi-rgb-led-matrix">this repo</a> forked and updated. So, i used this particular repo for my project. Forked and made changes.</p>

<h1 id="its-installation-">It’s installation ~</h1>

<p>Although, i am a big fan of <code class="language-plaintext highlighter-rouge">go get &lt;something&gt;</code> feature in go for any 3rd party package installation. In this case, i wasn’t. So, i simply cloned <a href="https://github.com/RockKeeper/go-rpi-rgb-led-matrix">github repo</a> in my go workspace.</p>

<blockquote>
  <p>Note : Cloning my look cumbersome errand to some but in my case, i wanted to make sure i can do some required changes. Having full control over the repo is the way how i go about.</p>
</blockquote>

<p><a href="https://postimg.cc/qz2JCrB4"><img src="https://i.postimg.cc/02BbF5LM/Screenshot-from-2021-08-21-11-36-28.png" alt="Screenshot-from-2021-08-21-11-36-28.png" /></a></p>

<p>As you can see, in the workspace i have only go.mod, go.sum, and sample test go file. As my IDE says, it can’t find the repo. Coz, i have installed it yet. Let’s go through and do it :</p>

<h2 id="cloning-the-repo-">Cloning the repo :</h2>

<p>So here’s how i cloned the repo ~</p>

<p><a href="https://postimg.cc/t7MkV0SS"><img src="https://i.postimg.cc/wT6GZghp/Screenshot-from-2021-08-21-11-44-21.png" alt="Screenshot-from-2021-08-21-11-44-21.png" /></a></p>

<p>And further i create a directory called <code class="language-plaintext highlighter-rouge">tutorial</code> and put the cloned <code class="language-plaintext highlighter-rouge">go-rpi-rgb-led-matrix</code> into it. Here’s how it looks like :</p>

<p><a href="https://postimg.cc/rK410Dts"><img src="https://i.postimg.cc/sD6wLSjY/Screenshot-from-2021-08-21-11-46-05.png" alt="Screenshot-from-2021-08-21-11-46-05.png" /></a></p>

<p>Now after that, change go into the <code class="language-plaintext highlighter-rouge">go-rpi-rgb-led-matrix</code> &amp; delete go.mod &amp; go.sum files. Further edit matrix.go file. Find this snippet in the file where file <code class="language-plaintext highlighter-rouge">import "C"</code>. Edit</p>

<p>From this :</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>import "C"
import (
	"fmt"
	"image/color"
	"os"
	"unsafe"

	"github.com/RockKeeper/go-rpi-rgb-led-matrix/emulator"
)
</pre></td></tr></tbody></table></code></pre></div></div>

<p>To this :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>import "C"
import (
	"fmt"
	"image/color"
	"os"
	"unsafe"

	"rgbtest/tutorial/go-rpi-rgb-led-matrix/emulator"
)
</pre></td></tr></tbody></table></code></pre></div></div>

<p>make sure your root go.mod is <code class="language-plaintext highlighter-rouge">rgbtest</code>.</p>

<p>Now, cd into lib folder in go-rpi-rgb-led-matrix and run this,</p>

<p><a href="https://postimg.cc/ZCQz5Kyw"><img src="https://i.postimg.cc/CxhhJRMp/Screenshot-from-2021-08-21-12-26-45.png" alt="Screenshot-from-2021-08-21-12-26-45.png" /></a></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>git submodule update --init
</pre></td></tr></tbody></table></code></pre></div></div>

<p>And after that, follow this! (i know too much steps but its worth it)</p>

<p><a href="https://postimg.cc/4YrKVgj5"><img src="https://i.postimg.cc/YSS1c23J/Screenshot-from-2021-08-21-12-30-30.png" alt="Screenshot-from-2021-08-21-12-30-30.png" /></a></p>

<p>When you run <code class="language-plaintext highlighter-rouge">make</code> &amp; something like this will go on:</p>

<p><a href="https://postimg.cc/cKSxd4VV"><img src="https://i.postimg.cc/5tH6qXpN/Screenshot-from-2021-08-21-12-30-39.png" alt="Screenshot-from-2021-08-21-12-30-39.png" /></a></p>

<p>Now finally all chaos done. When you go back and run the file [I HAD CHANED <code class="language-plaintext highlighter-rouge">main_rgb.go to main.go</code> to maintain consistency]:</p>

<p><a href="https://postimg.cc/QVH3GTFF"><img src="https://i.postimg.cc/xjPTmGY3/Screenshot-from-2021-08-21-12-35-00.png" alt="Screenshot-from-2021-08-21-12-35-00.png" /></a></p>

<p>NO! after all this? Yeah. if you look carefully, you will see its saying something like</p>

<h1 id="climax-">Climax ~</h1>

<p><code class="language-plaintext highlighter-rouge">non-existent blah blah Could not determine Pi model</code></p>

<p>Yeah, if you run it on Raspberry Pi. It will work. But how to run it on PC?.</p>

<p>Well fortuantely, we have been provided with an emulator to solve our case.</p>

<p>According to docmentation :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>As part of the library an small Matrix emulator is provided. 
The emulator renderize a virtual RGB matrix on a window in your desktop, without needing a real 
RGB matrix connected to your computer.

To execute the emulator set the MATRIX_EMULATOR environment variable to 1, then when NewRGBLedMatrix is used, 
a emulator.
Emulator is returned instead of a interface the real board.
</pre></td></tr></tbody></table></code></pre></div></div>

<p>To do that, type:</p>

<p><code class="language-plaintext highlighter-rouge">export MATRIX_EMULATOR = 1</code></p>

<p>and now if you run <code class="language-plaintext highlighter-rouge">main.go</code>.</p>

<p><a href="https://postimg.cc/xXcPR98N"><img src="https://i.postimg.cc/FHxnhRQp/Screenshot-from-2021-08-21-12-44-45.png" alt="Screenshot-from-2021-08-21-12-44-45.png" /></a></p>

<p>Finally! After all this.</p>

<p>This cloning method and following stuff my look bad to some. But please note. I did this because it gives better control to library. I can edit whatever i want or create anything new depending upon the use case.</p>

<p>All done!</p>

<p>Next time with something new :)</p>

<p>Ciao</p>

:ET